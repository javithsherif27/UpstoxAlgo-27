<!DOCTYPE html>
<html>
<head>
    <title>TradingView Chart Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #chartContainer { width: 100%; height: 500px; border: 1px solid #ccc; }
        .error { color: red; padding: 10px; background: #ffe6e6; border: 1px solid #ff0000; margin: 10px 0; }
        .loading { color: blue; padding: 10px; background: #e6f3ff; border: 1px solid #0066cc; margin: 10px 0; }
        .success { color: green; padding: 10px; background: #e6ffe6; border: 1px solid #00cc00; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>TradingView Chart Fix Verification</h1>
    <div id="status" class="loading">Testing chart library availability...</div>
    
    <div id="chartContainer"></div>
    
    <script>
        const statusDiv = document.getElementById('status');
        const chartContainer = document.getElementById('chartContainer');
        
        function updateStatus(message, type = 'loading') {
            statusDiv.className = type;
            statusDiv.textContent = message;
        }
        
        function testChartLibrary() {
            updateStatus('Checking TradingView library...', 'loading');
            
            // Test if we can create a basic chart container ID like our fix does
            const containerId = `tv-chart-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
            chartContainer.id = containerId;
            
            updateStatus(`✓ Container ID generated: ${containerId}`, 'success');
            
            // Test DOM element availability
            setTimeout(() => {
                const element = document.getElementById(containerId);
                if (element) {
                    updateStatus(`✓ Container element found in DOM. Chart fix should work!`, 'success');
                } else {
                    updateStatus('✗ Container element not found in DOM', 'error');
                }
            }, 100);
        }
        
        // Simulate our chart initialization logic
        testChartLibrary();
    </script>
</body>
</html>